function [U,A,activelist]=RowMMF(A,Nrows,k)
[n,m]=size(A);
activelist=zeros(n,1); for i=1:n activelist(i)=i; end
U=eye(n);

for r=n:-1:nsub+1
    ri=randi(r);
    i=activelist(ri);
    inp=A(activelist,:)*A(i,:)';
    inp(ri)=-Inf;
    [dummy,Ir]=kmax(inp,k);
    I=activelist(Ir);
    S=A(I,:)*A(I,:)';
    [V,D]=eig(S);
    U=U*V;
    A(I,:)=U'*A(I,:);
    [dummy,i]=min(diag(D));
    activelist=[activelist(1:Ir[i]-1);activelist(Ir[i]+1:r)];
    fprintf('%d %f',I[i],);
end